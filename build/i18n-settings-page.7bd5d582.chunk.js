"use strict";(self.webpackChunkbe_trading=self.webpackChunkbe_trading||[]).push([[3552],{72751:(F,C,t)=>{t.r(C),t.d(C,{default:()=>$e});var e=t(53547),i=t(2911),b=t(45697),c=t.n(b),E=t(86896),x=t(29728),y=t(185),B=t(89722),A=t(53979),I=t(49066),W=t(96315),z=t(86031),u=t(8181),l=t(15559),f=t(41054),h=t(85018),v=t(42866),p=t(24969),P=t(59946),j=t(36856),U=t(82777),M=t(77296),Z=t(42761),w=t(11047),k=t(41580),q=t(70004),S=t(75515),H=t(48040);const _=(0,H.Ry)().shape({code:(0,H.Z_)().required(),displayName:(0,H.Z_)().max(50,"Settings.locales.modal.locales.displayName.error").required(i.I0.required)});var K=t(86706),G=t(7982);const re=async(a,s,o)=>{try{const n=await(0,i.WY)(`/i18n/locales/${a}`,{method:"PUT",body:s});return o({type:"success",message:{id:(0,l.O)("Settings.locales.modal.edit.success")}}),n}catch{return o({type:"warning",message:{id:"notification.error"}}),null}},ue=()=>{const[a,s]=(0,e.useState)(!1),o=(0,K.I0)(),n=(0,i.lm)();return{isEditing:a,editLocale:async(r,m)=>{s(!0);const g=await re(r,m,n);o({type:G.OT,editedLocale:g}),s(!1)}}};var ee=t(11276),V=t(74571),te=t(16364),me=t(40619),ge=t(82562),fe=t(88767),he=t(14087);const ve=async a=>{try{return await(0,i.WY)("/i18n/iso-locales",{method:"GET"})}catch{return a({type:"warning",message:{id:"notification.error"}}),[]}},ae=()=>{const{formatMessage:a}=(0,E.Z)(),{notifyStatus:s}=(0,he.G)(),o=(0,i.lm)(),{isLoading:n,data:d}=(0,fe.useQuery)("default-locales",()=>ve(o).then(r=>(s(a({id:(0,l.O)("Settings.locales.modal.locales.loaded"),defaultMessage:"The locales have been successfully loaded."})),r)));return{defaultLocales:d,isLoading:n}},le=({locale:a})=>{const{formatMessage:s}=(0,E.Z)(),{values:o,handleChange:n,errors:d}=(0,f.u6)(),{defaultLocales:r,isLoading:m}=ae(),g=!m&&r.find(O=>O.code===a.code);return e.createElement(ee.r,{gap:4},e.createElement(V.P,{col:6},e.createElement(me.P,{label:s({id:(0,l.O)("Settings.locales.modal.locales.label"),defaultMessage:"Locales"}),value:g?.code||a.code,disabled:!0},e.createElement(ge.W,{value:g?.code||a.code},g?.name||a.code))),e.createElement(V.P,{col:6},e.createElement(te.o,{name:"displayName",label:s({id:(0,l.O)("Settings.locales.modal.locales.displayName"),defaultMessage:"Locale display name"}),hint:s({id:(0,l.O)("Settings.locales.modal.locales.displayName.description"),defaultMessage:"Locale will be displayed under that name in the administration panel"}),error:d.displayName?s({id:(0,l.O)("Settings.locales.modal.locales.displayName.error"),defaultMessage:"The locale display name can only be less than 50 characters."}):void 0,value:o.displayName,onChange:n})))},Ee=le;le.propTypes={locale:c().shape({id:c().number.isRequired,name:c().string.isRequired,code:c().string.isRequired,isDefault:c().bool.isRequired}).isRequired};var ne=t(36213);const se=({isDefaultLocale:a})=>{const{values:s,setFieldValue:o}=(0,f.u6)(),{formatMessage:n}=(0,E.Z)();return e.createElement(ne.X,{name:"isDefault",hint:n({id:(0,l.O)("Settings.locales.modal.advanced.setAsDefault.hint"),defaultMessage:"One default locale is required, change it by selecting another one"}),onChange:()=>o("isDefault",!s.isDefault),value:s.isDefault,disabled:a},n({id:(0,l.O)("Settings.locales.modal.advanced.setAsDefault"),defaultMessage:"Set as default locale"}))};se.propTypes={isDefaultLocale:c().bool.isRequired};const ye=se,$=({locale:a,onClose:s})=>{const{refetchPermissions:o}=(0,i.vn)(),{isEditing:n,editLocale:d}=ue(),{formatMessage:r}=(0,E.Z)(),m=async({displayName:g,isDefault:O})=>{await d(a.id,{name:g,isDefault:O}),await o()};return e.createElement(v.P,{onClose:s,labelledBy:"edit-locale-title"},e.createElement(f.J9,{initialValues:{code:a?.code,displayName:a?.name||"",isDefault:Boolean(a?.isDefault)},onSubmit:m,validationSchema:_},e.createElement(i.l0,null,e.createElement(p.x,null,e.createElement(S.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"edit-locale-title"},r({id:(0,l.O)("Settings.list.actions.edit"),defaultMessage:"Edit a locale"}))),e.createElement(P.f,null,e.createElement(U.v,{label:r({id:(0,l.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"}),id:"tabs",variant:"simple"},e.createElement(w.k,{justifyContent:"space-between"},e.createElement(S.Z,{as:"h2"},r({id:(0,l.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"})),e.createElement(M.m,null,e.createElement(M.O,null,r({id:(0,l.O)("Settings.locales.modal.base"),defaultMessage:"Basic settings"})),e.createElement(M.O,null,r({id:(0,l.O)("Settings.locales.modal.advanced"),defaultMessage:"Advanced settings"})))),e.createElement(q.i,null),e.createElement(k.x,{paddingTop:7,paddingBottom:7},e.createElement(Z.n,null,e.createElement(Z.x,null,e.createElement(Ee,{locale:a})),e.createElement(Z.x,null,e.createElement(ye,{isDefaultLocale:Boolean(a&&a.isDefault)})))))),e.createElement(j.m,{startActions:e.createElement(x.z,{variant:"tertiary",onClick:s},r({id:"app.components.Button.cancel"})),endActions:e.createElement(x.z,{type:"submit",startIcon:e.createElement(h.Z,null),disabled:n},r({id:"global.save"}))}))))};$.defaultProps={locale:void 0},$.propTypes={locale:c().shape({id:c().number.isRequired,name:c().string.isRequired,code:c().string.isRequired,isDefault:c().bool.isRequired}),onClose:c().func.isRequired};const pe=$,Le=async(a,s)=>{try{const o=await(0,i.WY)(`/i18n/locales/${a}`,{method:"DELETE"});return s({type:"success",message:{id:(0,l.O)("Settings.locales.modal.delete.success")}}),o}catch(o){return s({type:"warning",message:{id:"notification.error"}}),o}},Ce=()=>{const[a,s]=(0,e.useState)(!1),o=(0,K.I0)(),n=(0,i.lm)();return{isDeleting:a,deleteLocale:async r=>{s(!0),await Le(r,n),o({type:G.HC,id:r}),s(!1)}}},Y=({localeToDelete:a,onClose:s})=>{const{isDeleting:o,deleteLocale:n}=Ce(),d=Boolean(a),r=()=>n(a.id).then(s);return e.createElement(i.QH,{isConfirmButtonLoading:o,onConfirm:r,onToggleDialog:s,isOpen:d})};Y.defaultProps={localeToDelete:void 0},Y.propTypes={localeToDelete:c().shape({id:c().number.isRequired}),onClose:c().func.isRequired};const xe=Y;var Se=t(27361),Me=t.n(Se);const Oe=async({code:a,name:s,isDefault:o},n)=>{const d=await(0,i.WY)("/i18n/locales",{method:"POST",body:{name:s,code:a,isDefault:o}});return n({type:"success",message:{id:(0,l.O)("Settings.locales.modal.create.success")}}),d},De=()=>{const[a,s]=(0,e.useState)(!1),o=(0,K.I0)(),n=(0,i.lm)();return{isAdding:a,addLocale:async r=>{s(!0);try{const m=await Oe(r,n);o({type:G.xz,newLocale:m})}catch(m){const g=Me()(m,"response.payload.message",null);throw g&&g.includes("already exists")?n({type:"warning",message:{id:(0,l.O)("Settings.locales.modal.create.alreadyExist")}}):n({type:"warning",message:{id:"notification.error"}}),m}finally{s(!1)}}}};var Te=t(29178),be=t(90608);const Q=e.memo(({value:a,onClear:s,onLocaleChange:o,error:n})=>{const{formatMessage:d}=(0,E.Z)(),{defaultLocales:r,isLoading:m}=ae(),{locales:g}=(0,u.Z)(),O=(r||[]).map(L=>({label:L.name,value:L.code})).filter(({value:L})=>{const T=g.find(({code:N})=>N===L);return!T||T.code===a}),R=a||"";return e.createElement(Te.hQ,{"aria-busy":m,error:n,label:d({id:(0,l.O)("Settings.locales.modal.locales.label"),defaultMessage:"Locales"}),value:R,onClear:a?s:void 0,onChange:L=>{const T=O.find(N=>N.value===L);T&&o({code:T.value,displayName:T.label})},placeholder:d({id:"components.placeholder.select",defaultMessage:"Select"})},O.map(L=>e.createElement(be.O,{value:L.value,key:L.value},L.label)))});Q.defaultProps={error:void 0,value:void 0,onClear(){},onLocaleChange:()=>{}},Q.propTypes={error:c().string,onClear:c().func,onLocaleChange:c().func,value:c().string};const Be=Q,Pe=()=>{const{formatMessage:a}=(0,E.Z)(),{values:s,handleChange:o,setFieldValue:n,errors:d}=(0,f.u6)(),r=(0,e.useCallback)(g=>{n("displayName",g.displayName),n("code",g.code)},[n]),m=(0,e.useCallback)(()=>{n("displayName",""),n("code","")},[n]);return e.createElement(ee.r,{gap:4},e.createElement(V.P,{col:6},e.createElement(Be,{error:d.code,value:s.code,onLocaleChange:r,onClear:m})),e.createElement(V.P,{col:6},e.createElement(te.o,{name:"displayName",label:a({id:(0,l.O)("Settings.locales.modal.locales.displayName"),defaultMessage:"Locale display name"}),hint:a({id:(0,l.O)("Settings.locales.modal.locales.displayName.description"),defaultMessage:"Locale will be displayed under that name in the administration panel"}),error:d.displayName?a({id:(0,l.O)("Settings.locales.modal.locales.displayName.error"),defaultMessage:"The locale display name can only be less than 50 characters."}):void 0,value:s.displayName,onChange:o})))},Re=()=>{const{values:a,setFieldValue:s}=(0,f.u6)(),{formatMessage:o}=(0,E.Z)();return e.createElement(ne.X,{hint:o({id:(0,l.O)("Settings.locales.modal.advanced.setAsDefault.hint"),defaultMessage:"One default locale is required, change it by selecting another one"}),onChange:()=>s("isDefault",!a.isDefault),value:a.isDefault},o({id:(0,l.O)("Settings.locales.modal.advanced.setAsDefault"),defaultMessage:"Set as default locale"}))},Ae={code:"",displayName:"",isDefault:!1},oe=({onClose:a})=>{const{isAdding:s,addLocale:o}=De(),{formatMessage:n}=(0,E.Z)(),{refetchPermissions:d}=(0,i.vn)(),r=async m=>{await o({code:m.code,name:m.displayName,isDefault:m.isDefault}),await d()};return e.createElement(v.P,{onClose:a,labelledBy:"add-locale-title"},e.createElement(f.J9,{initialValues:Ae,onSubmit:r,validationSchema:_,validateOnChange:!1},e.createElement(i.l0,null,e.createElement(p.x,null,e.createElement(S.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"add-locale-title"},n({id:(0,l.O)("Settings.list.actions.add"),defaultMessage:"Add new locale"}))),e.createElement(P.f,null,e.createElement(U.v,{label:n({id:(0,l.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"}),id:"tabs",variant:"simple"},e.createElement(w.k,{justifyContent:"space-between"},e.createElement(S.Z,{as:"h2",variant:"beta"},n({id:(0,l.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"})),e.createElement(M.m,null,e.createElement(M.O,null,n({id:(0,l.O)("Settings.locales.modal.base"),defaultMessage:"Basic settings"})),e.createElement(M.O,null,n({id:(0,l.O)("Settings.locales.modal.advanced"),defaultMessage:"Advanced settings"})))),e.createElement(q.i,null),e.createElement(k.x,{paddingTop:7,paddingBottom:7},e.createElement(Z.n,null,e.createElement(Z.x,null,e.createElement(Pe,null)),e.createElement(Z.x,null,e.createElement(Re,null)))))),e.createElement(j.m,{startActions:e.createElement(x.z,{variant:"tertiary",onClick:a},n({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(x.z,{type:"submit",startIcon:e.createElement(h.Z,null),disabled:s},n({id:"global.save",defaultMessage:"Save"}))}))))};oe.propTypes={onClose:c().func.isRequired};const Ze=oe;var ce=t(12028),je=t(7681),Ne=t(63237),Fe=t(38939),Ie=t(8060),de=t(79031),D=t(37909),We=t(15234),ze=t(4585),Ue=t(20022);const X=({locales:a,onDeleteLocale:s,onEditLocale:o})=>{const{formatMessage:n}=(0,E.Z)();return e.createElement(Fe.i,{colCount:4,rowCount:a.length+1},e.createElement(Ie.h,null,e.createElement(de.Tr,null,e.createElement(D.Th,null,e.createElement(S.Z,{variant:"sigma",textColor:"neutral600"},n({id:(0,l.O)("Settings.locales.row.id")}))),e.createElement(D.Th,null,e.createElement(S.Z,{variant:"sigma",textColor:"neutral600"},n({id:(0,l.O)("Settings.locales.row.displayName")}))),e.createElement(D.Th,null,e.createElement(S.Z,{variant:"sigma",textColor:"neutral600"},n({id:(0,l.O)("Settings.locales.row.default-locale")}))),e.createElement(D.Th,null,e.createElement(Ne.T,null,"Actions")))),e.createElement(We.p,null,a.map(d=>e.createElement(de.Tr,{key:d.id,...(0,i.X7)({fn:()=>o(d),condition:o})},e.createElement(D.Td,null,e.createElement(S.Z,{textColor:"neutral800"},d.id)),e.createElement(D.Td,null,e.createElement(S.Z,{textColor:"neutral800"},d.name)),e.createElement(D.Td,null,e.createElement(S.Z,{textColor:"neutral800"},d.isDefault?n({id:(0,l.O)("Settings.locales.default")}):null)),e.createElement(D.Td,null,e.createElement(je.K,{horizontal:!0,spacing:1,style:{justifyContent:"flex-end"},...i.UW},o&&e.createElement(ce.h,{onClick:()=>o(d),label:n({id:(0,l.O)("Settings.list.actions.edit")}),icon:e.createElement(ze.Z,null),noBorder:!0}),s&&!d.isDefault&&e.createElement(ce.h,{onClick:()=>s(d),label:n({id:(0,l.O)("Settings.list.actions.delete")}),icon:e.createElement(Ue.Z,null),noBorder:!0})))))))};X.defaultProps={locales:[],onDeleteLocale:void 0,onEditLocale:void 0},X.propTypes={locales:c().array,onDeleteLocale:c().func,onEditLocale:c().func};const Ve=X,J=({canUpdateLocale:a,canDeleteLocale:s,onToggleCreateModal:o,isCreating:n})=>{const[d,r]=(0,e.useState)(),[m,g]=(0,e.useState)(),{locales:O}=(0,u.Z)(),{formatMessage:R}=(0,E.Z)();(0,i.go)();const L=()=>r(void 0),T=s?r:void 0,N=()=>g(void 0),Ye=a?g:void 0;return e.createElement(y.o,{tabIndex:-1},e.createElement(A.T,{primaryAction:e.createElement(x.z,{startIcon:e.createElement(W.Z,null),onClick:o,size:"S"},R({id:(0,l.O)("Settings.list.actions.add")})),title:R({id:(0,l.O)("plugin.name")}),subtitle:R({id:(0,l.O)("Settings.list.description")})}),e.createElement(I.D,null,O?.length>0?e.createElement(Ve,{locales:O,onDeleteLocale:T,onEditLocale:Ye}):e.createElement(B.x,{icon:e.createElement(z.Z,{width:void 0,height:void 0}),content:R({id:(0,l.O)("Settings.list.empty.title")}),action:o?e.createElement(x.z,{variant:"secondary",startIcon:e.createElement(W.Z,null),onClick:o},R({id:(0,l.O)("Settings.list.actions.add")})):null})),n&&e.createElement(Ze,{onClose:o}),m&&e.createElement(pe,{onClose:N,locale:m}),e.createElement(xe,{localeToDelete:d,onClose:L}))};J.defaultProps={onToggleCreateModal:void 0},J.propTypes={canUpdateLocale:c().bool.isRequired,canDeleteLocale:c().bool.isRequired,onToggleCreateModal:c().func,isCreating:c().bool.isRequired};const He=J,ie=({canReadLocale:a,canCreateLocale:s,canDeleteLocale:o,canUpdateLocale:n})=>{const[d,r]=(0,e.useState)(!1),m=s?()=>r(g=>!g):void 0;return a?e.createElement(He,{canUpdateLocale:n,canDeleteLocale:o,onToggleCreateModal:m,isCreating:d}):null};ie.propTypes={canReadLocale:c().bool.isRequired,canCreateLocale:c().bool.isRequired,canUpdateLocale:c().bool.isRequired,canDeleteLocale:c().bool.isRequired};const Ke=ie;var Ge=t(2135);const $e=()=>{const{isLoading:a,allowedActions:{canRead:s,canUpdate:o,canCreate:n,canDelete:d}}=(0,i.ss)(Ge.Z);return a?null:e.createElement(Ke,{canReadLocale:s,canCreateLocale:n,canUpdateLocale:o,canDeleteLocale:d})}},90608:(F,C,t)=>{t.d(C,{O:()=>i});var e=t(29178);const i=e.Wx},49066:(F,C,t)=>{t.d(C,{D:()=>b});var e=t(85893),i=t(41580);const b=({children:c})=>(0,e.jsx)(i.x,{paddingLeft:10,paddingRight:10,children:c})},53979:(F,C,t)=>{t.d(C,{T:()=>I});var e=t(85893),i=t(53547),b=t(1565);const c=u=>{const l=(0,i.useRef)(null),[f,h]=(0,i.useState)(!0),v=([p])=>{h(p.isIntersecting)};return(0,i.useEffect)(()=>{const p=l.current,P=new IntersectionObserver(v,u);return p&&P.observe(l.current),()=>{p&&P.disconnect()}},[l,u]),[l,f]};var E=t(79698);const x=(u,l)=>{const f=(0,E.W)(l);(0,i.useLayoutEffect)(()=>{const h=new ResizeObserver(f);return Array.isArray(u)?u.forEach(v=>{v.current&&h.observe(v.current)}):u.current&&h.observe(u.current),()=>{h.disconnect()}},[u,f])};var y=t(41580),B=t(11047),A=t(75515);const I=u=>{const l=(0,i.useRef)(null),[f,h]=(0,i.useState)(null),[v,p]=c({root:null,rootMargin:"0px",threshold:0});return x(v,()=>{v.current&&h(v.current.getBoundingClientRect())}),(0,i.useEffect)(()=>{l.current&&h(l.current.getBoundingClientRect())},[l]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:f?.height},ref:v,children:p&&(0,e.jsx)(z,{ref:l,...u})}),!p&&(0,e.jsx)(z,{...u,sticky:!0,width:f?.width})]})};I.displayName="HeaderLayout";const W=(0,b.ZP)(y.x)`
  width: ${({width:u})=>u?`${u/16}rem`:void 0};
  z-index: ${({theme:u})=>u.zIndices[1]};
`,z=i.forwardRef(({navigationAction:u,primaryAction:l,secondaryAction:f,subtitle:h,title:v,sticky:p,width:P,...j},U)=>{const M=typeof h=="string";return p?(0,e.jsx)(W,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:P,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(B.k,{justifyContent:"space-between",children:[(0,e.jsxs)(B.k,{children:[u&&(0,e.jsx)(y.x,{paddingRight:3,children:u}),(0,e.jsxs)(y.x,{children:[(0,e.jsx)(A.Z,{variant:"beta",as:"h1",...j,children:v}),M?(0,e.jsx)(A.Z,{variant:"pi",textColor:"neutral600",children:h}):h]}),f?(0,e.jsx)(y.x,{paddingLeft:4,children:f}):null]}),(0,e.jsx)(B.k,{children:l?(0,e.jsx)(y.x,{paddingLeft:2,children:l}):void 0})]})}):(0,e.jsxs)(y.x,{ref:U,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:u?6:8,background:"neutral100","data-strapi-header":!0,children:[u?(0,e.jsx)(y.x,{paddingBottom:2,children:u}):null,(0,e.jsxs)(B.k,{justifyContent:"space-between",children:[(0,e.jsxs)(B.k,{minWidth:0,children:[(0,e.jsx)(A.Z,{as:"h1",variant:"alpha",...j,children:v}),f?(0,e.jsx)(y.x,{paddingLeft:4,children:f}):null]}),l]}),M?(0,e.jsx)(A.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:h}):h]})})},185:(F,C,t)=>{t.d(C,{o:()=>E});var e=t(85893),i=t(1565),b=t(41580);const c=(0,i.ZP)(b.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,E=({labelledBy:x="main-content-title",...y})=>(0,e.jsx)(c,{"aria-labelledby":x,as:"main",id:"main-content",tabIndex:-1,...y})}}]);
